(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[878],{9915:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/overlay",function(){return t(3645)}])},7319:function(e,n,t){"use strict";t.d(n,{Q:function(){return s},v:function(){return c}});var o=t(5893),a=t(7294);let l="14.20.1";class i{static getChampionIconUrl(e){let{championName:n,championId:t,version:o=l,fallbackToProfileIcon:a=!0,profileIconId:i}=e,r=[];return n&&(r.push("https://ddragon.leagueoflegends.com/cdn/".concat(o,"/img/champion/").concat(n,".png")),o!==l&&r.push("https://ddragon.leagueoflegends.com/cdn/".concat(l,"/img/champion/").concat(n,".png")),r.push("https://ddragon.leagueoflegends.com/cdn/img/champion/loading/".concat(n,"_0.jpg")),r.push("https://ddragon.leagueoflegends.com/cdn/img/champion/splash/".concat(n,"_0.jpg"))),t&&!n&&r.push("https://ddragon.leagueoflegends.com/cdn/".concat(o,"/img/champion/loading/Champion").concat(t,"_0.jpg")),a&&i&&(r.push("https://ddragon.leagueoflegends.com/cdn/".concat(o,"/img/profileicon/").concat(i,".png")),o!==l&&r.push("https://ddragon.leagueoflegends.com/cdn/".concat(l,"/img/profileicon/").concat(i,".png"))),r.push("https://ddragon.leagueoflegends.com/cdn/".concat(o,"/img/profileicon/29.png")),r.filter(e=>!this.failedUrls.has(e))}static async loadChampionIcon(e){let n=JSON.stringify(e);if(this.cache.has(n))return this.cache.get(n);for(let t of this.getChampionIconUrl(e))try{if(await this.testImageUrl(t))return this.cache.set(n,t),t;this.failedUrls.add(t)}catch(e){this.failedUrls.add(t);continue}return null}static testImageUrl(e){return new Promise(n=>{let t=new Image;t.onload=()=>n(!0),t.onerror=()=>n(!1),t.src=e,setTimeout(()=>n(!1),3e3)})}static async preloadChampionIcons(e){let n=e.map(async e=>{(e.championName||e.championId)&&await this.loadChampionIcon({championName:e.championName,championId:e.championId,profileIconId:e.profileIconId})});await Promise.allSettled(n)}static clearCache(){this.cache.clear(),this.failedUrls.clear()}static getCacheStats(){return{cacheSize:this.cache.size,failedUrlsCount:this.failedUrls.size}}}function r(e){let{role:n,className:t}=e,a=(n||"").toLowerCase(),l={top:"\uD83D\uDEE1️",jungle:"\uD83C\uDF3F",mid:"\uD83D\uDDE1️",adc:"\uD83C\uDFF9",bottom:"\uD83C\uDFF9",support:"✨"}[a]||"\uD83C\uDFA7";return(0,o.jsx)("span",{className:t,"aria-label":a||"unknown",title:a||"unknown",children:l})}function s(e){let{alt:n,className:t="w-full h-full object-cover",role:l,showLoadingSpinner:s=!1,...c}=e,[d,u]=(0,a.useState)(null),[h,m]=(0,a.useState)(!0),[p,g]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{let e=!1,n=async()=>{m(!0),g(!1);try{let n=await i.loadChampionIcon(c);e||(n?u(n):g(!0))}catch(n){e||g(!0)}finally{e||m(!1)}};return c.championName||c.championId||c.profileIconId?n():(m(!1),g(!0)),()=>{e=!0}},[JSON.stringify(c)]),h&&s)?(0,o.jsx)("div",{className:"".concat(t," flex items-center justify-center bg-neutral-800"),children:(0,o.jsx)("div",{className:"w-4 h-4 border-2 border-violet-500 border-t-transparent rounded-full animate-spin"})}):d&&!p?(0,o.jsx)("img",{src:d,alt:n,className:t,onError:()=>g(!0)}):(0,o.jsx)(r,{role:l,className:t})}function c(e){let{showPreview:n=!1,previewClassName:t="absolute top-full left-1/2 transform -translate-x-1/2 w-32 h-48 object-cover rounded-lg shadow-xl z-50",...l}=e,[i,r]=(0,a.useState)(null);return(0,a.useEffect)(()=>{n&&l.championName&&r("https://ddragon.leagueoflegends.com/cdn/img/champion/splash/".concat(l.championName,"_0.jpg"))},[n,l.championName]),(0,o.jsxs)("div",{className:"relative group",children:[(0,o.jsx)(s,{...l}),n&&i&&(0,o.jsx)("img",{src:i,alt:"".concat(l.alt," splash art"),className:"".concat(t," opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none"),onError:()=>r(null)})]})}i.cache=new Map,i.failedUrls=new Set},7362:function(e,n,t){"use strict";t.d(n,{O:function(){return i},o:function(){return r}});var o=t(5893),a=t(7294),l=t(2956);function i(e){let{userId:n,initialVolume:t=1,onVolumeChange:i,className:r="",size:s="md"}=e,[c,d]=(0,a.useState)(t),[u,h]=(0,a.useState)(!1);(0,a.useEffect)(()=>{d(t)},[t]);let m=e=>{let t=Math.max(0,Math.min(1,e));d(t),i(n,t)},p=0===c?l.Eju:c<.5?l.KLu:l.R$S,g={sm:{slider:"w-16 h-1",container:"gap-1",icon:"w-3 h-3",text:"text-xs"},md:{slider:"w-20 h-1.5",container:"gap-2",icon:"w-4 h-4",text:"text-sm"},lg:{slider:"w-24 h-2",container:"gap-2",icon:"w-5 h-5",text:"text-base"}}[s];return(0,o.jsxs)("div",{className:"flex items-center ".concat(g.container," ").concat(r),children:[(0,o.jsx)(p,{className:"".concat(g.icon," text-neutral-400 flex-shrink-0")}),(0,o.jsx)("div",{className:"relative flex-1",children:(0,o.jsx)("input",{type:"range",min:"0",max:"1",step:"0.05",value:c,onChange:e=>m(Number(e.target.value)),onMouseDown:()=>h(!0),onMouseUp:()=>h(!1),className:"\n            ".concat(g.slider," \n            appearance-none bg-neutral-700 rounded-full cursor-pointer\n            focus:outline-none focus:ring-2 focus:ring-violet-500/50\n            [&::-webkit-slider-thumb]:appearance-none\n            [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3\n            [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-white\n            [&::-webkit-slider-thumb]:cursor-pointer [&::-webkit-slider-thumb]:shadow-md\n            [&::-webkit-slider-thumb]:transition-all [&::-webkit-slider-thumb]:duration-150\n            hover:[&::-webkit-slider-thumb]:bg-violet-400\n            ").concat(u?"[&::-webkit-slider-thumb]:bg-violet-500 [&::-webkit-slider-thumb]:scale-110":"","\n          "),style:{background:"linear-gradient(to right, #8b5cf6 0%, #8b5cf6 ".concat(100*c,"%, #404040 ").concat(100*c,"%, #404040 100%)")}})}),(0,o.jsx)("span",{className:"".concat(g.text," text-neutral-400 font-mono min-w-[2rem] text-center"),children:Math.round(100*c)})]})}function r(e){let{userId:n,initialVolume:t=1,onVolumeChange:a}=e;return(0,o.jsx)(i,{userId:n,initialVolume:t,onVolumeChange:a,size:"sm",className:"px-2 py-1"})}},3645:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return p}});var o=t(5893),a=t(7294),l=t(7319),i=t(7362),r=t(3935);function s(e){let{items:n,x:t,y:l,onClose:i,visible:s}=e,c=(0,a.useRef)(null),[d,u]=(0,a.useState)({x:t,y:l});if((0,a.useEffect)(()=>{if(!s||!c.current)return;let e=c.current.getBoundingClientRect(),n=window.innerWidth,o=window.innerHeight,a=t,i=l;t+e.width>n&&(a=n-e.width-8),l+e.height>o&&(i=o-e.height-8),i<8&&(i=8),a<8&&(a=8),u({x:a,y:i})},[s,t,l]),(0,a.useEffect)(()=>{if(!s)return;let e=e=>{c.current&&!c.current.contains(e.target)&&i()},n=e=>{"Escape"===e.key&&i()};return document.addEventListener("mousedown",e),document.addEventListener("keydown",n),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("keydown",n)}},[s,i]),!s)return null;let h=(0,o.jsx)("div",{ref:c,className:"fixed z-50 bg-neutral-900/95 backdrop-blur-md border border-neutral-700/50 rounded-lg shadow-xl py-2 min-w-[180px] animate-in fade-in-0 zoom-in-95 duration-100",style:{left:d.x,top:d.y},children:n.map((e,n)=>{if(e.separator)return(0,o.jsx)("div",{className:"my-1 border-t border-neutral-700/50"},"separator-".concat(n));let t=e.icon;return(0,o.jsxs)("button",{onClick:()=>{e.disabled||(e.onClick(),i())},disabled:e.disabled,className:"\n              w-full px-3 py-2 text-left text-sm flex items-center gap-3 transition-colors\n              ".concat(e.disabled?"text-neutral-500 cursor-not-allowed":e.danger?"text-red-400 hover:bg-red-500/10 hover:text-red-300":"text-neutral-200 hover:bg-white/10 hover:text-white","\n            "),children:[t&&(0,o.jsx)(t,{className:"w-4 h-4 flex-shrink-0"}),(0,o.jsx)("span",{className:"truncate",children:e.label})]},e.id)})});return"undefined"!=typeof document?(0,r.createPortal)(h,document.body):null}var c=t(2956),d=t(117);let u={default:{id:"default",name:"Default",description:"Standard dark theme with violet accents",colors:{background:"bg-neutral-900/30",border:"ring-white/10",text:"text-white",accent:"ring-violet-500/50",speaking:"ring-green-400",hover:"hover:bg-white/10"},opacity:{base:.4,hover:1},effects:{blur:"backdrop-blur-[4px]",shadow:"shadow-lg shadow-green-400/25",scale:1.05}},minimal:{id:"minimal",name:"Minimal",description:"Clean and minimal with reduced visual noise",colors:{background:"bg-black/20",border:"ring-white/5",text:"text-white",accent:"ring-blue-400/40",speaking:"ring-green-300",hover:"hover:bg-white/5"},opacity:{base:.6,hover:.9},effects:{blur:"backdrop-blur-[2px]",shadow:"shadow-md shadow-green-300/20",scale:1.02}},gaming:{id:"gaming",name:"Gaming",description:"High contrast theme optimized for gaming",colors:{background:"bg-red-900/40",border:"ring-red-400/20",text:"text-white",accent:"ring-red-400/60",speaking:"ring-yellow-400",hover:"hover:bg-red-400/20"},opacity:{base:.5,hover:1},effects:{blur:"backdrop-blur-[6px]",shadow:"shadow-lg shadow-yellow-400/30",scale:1.08}},professional:{id:"professional",name:"Professional",description:"Clean corporate theme with blue accents",colors:{background:"bg-slate-800/35",border:"ring-slate-400/15",text:"text-slate-100",accent:"ring-blue-400/50",speaking:"ring-emerald-400",hover:"hover:bg-slate-400/15"},opacity:{base:.45,hover:.95},effects:{blur:"backdrop-blur-[3px]",shadow:"shadow-lg shadow-emerald-400/25",scale:1.03}},neon:{id:"neon",name:"Neon",description:"Cyberpunk-inspired theme with neon colors",colors:{background:"bg-purple-900/30",border:"ring-cyan-400/20",text:"text-cyan-100",accent:"ring-cyan-400/70",speaking:"ring-pink-400",hover:"hover:bg-cyan-400/10"},opacity:{base:.3,hover:1},effects:{blur:"backdrop-blur-[8px]",shadow:"shadow-xl shadow-pink-400/40",scale:1.1}}},h={WebkitAppRegion:"drag"},m={WebkitAppRegion:"no-drag"};function p(){let[e,n]=(0,a.useState)([]),[t,r]=(0,a.useState)(!0),[p,g]=(0,a.useState)("default"),f=(0,a.useRef)(null),v=(0,a.useRef)({}),{speakingUsers:b,isSelfSpeaking:x,setUserVolume:w,getUserVolume:y}=(0,d.M)(),{contextMenu:k,showContextMenu:j,hideContextMenu:N}=function(){let[e,n]=(0,a.useState)({visible:!1,x:0,y:0,items:[]});return{contextMenu:e,showContextMenu:(e,t)=>{e.preventDefault(),e.stopPropagation(),n({visible:!0,x:e.clientX,y:e.clientY,items:t})},hideContextMenu:()=>{n(e=>({...e,visible:!1}))}}}(),C=u[p]||u.default;(0,a.useEffect)(()=>{g(function(){try{return localStorage.getItem("hexcall-overlay-theme")||"default"}catch(e){console.warn("Failed to load overlay theme:",e)}return"default"}())},[]);let[I,S]=(0,a.useState)([]);(0,a.useEffect)(()=>{let e=e=>{Array.isArray(null==e?void 0:e.detail)&&S(e.detail)};window.addEventListener("hexcall:presence",e);try{let e=localStorage.getItem("hexcall-presence");e&&S(JSON.parse(e))}catch(e){}return()=>{window.removeEventListener("hexcall:presence",e)}},[]),(0,a.useEffect)(()=>{var e,t;let o=null===(t=window.hexcall)||void 0===t?void 0:null===(e=t.onLcuUpdate)||void 0===e?void 0:e.call(t,e=>{var t,o,a,l,i,r,s,c,d,u;(null==e?void 0:e.phase)&&f.current&&(f.current.dataset.phase=String(e.phase));let h=(null==e?void 0:e.members)||[],m=(null==e?void 0:null===(o=e.session)||void 0===o?void 0:null===(t=o.gameData)||void 0===t?void 0:t.playerChampionSelections)||[],p=(null==e?void 0:e.phase)||"",g=(null==e?void 0:null===(i=e.session)||void 0===i?void 0:null===(l=i.gameData)||void 0===l?void 0:null===(a=l.gameDeltas)||void 0===a?void 0:a.clientVersion)||(null==e?void 0:null===(s=e.session)||void 0===s?void 0:null===(r=s.gameData)||void 0===r?void 0:r.gameVersion)||"14.20.1";"InProgress"===p&&0===Object.keys(v.current).length&&fetch("https://ddragon.leagueoflegends.com/cdn/".concat(g,"/data/en_US/champion.json")).then(e=>e.json()).then(e=>{let n={};for(let o of Object.keys(e.data||{})){var t;let a=null===(t=e.data[o])||void 0===t?void 0:t.key;a&&(n[String(a)]=o)}v.current=n}).catch(()=>{});let b={};for(let e of h){let n=e.puuid||e.summonerId||e.accountId||String(Math.random());b[n]={puuid:n,name:e.summonerName||e.gameName||"Player",role:(e.assignedPosition||e.position||"").toLowerCase(),iconUrl:"InProgress"!==p?e.iconUrl||(e.profileIconId?"https://ddragon.leagueoflegends.com/cdn/".concat(g,"/img/profileicon/").concat(e.profileIconId,".png"):void 0):void 0,volume:1}}for(let e of m){let n=(null==e?void 0:e.puuid)||(null==e?void 0:e.summonerId)||(null==e?void 0:e.accountId);if(!n)continue;let t=((null==e?void 0:e.assignedPosition)||(null==e?void 0:e.position)||"").toLowerCase();if(b[n]&&(b[n].role=t),"InProgress"===p){let t=(null==e?void 0:e.championName)||(null==e?void 0:e.championId);if(t&&b[n]){let e="string"==typeof t?t:void 0;if(!e){let n=v.current[String(t)]||"";n&&(e=n)}e&&(b[n].iconUrl="https://ddragon.leagueoflegends.com/cdn/".concat(g,"/img/champion/").concat(e,".png"))}}}let x=Object.values(b);try{let n=localStorage.getItem("hexcall-presence"),t=n?JSON.parse(n):I,o=(null==e?void 0:null===(c=e.self)||void 0===c?void 0:c.puuid)||(null==e?void 0:null===(d=e.self)||void 0===d?void 0:d.summonerId)||(null==e?void 0:null===(u=e.self)||void 0===u?void 0:u.accountId);t&&t.length?x=x.filter(e=>t.includes(e.puuid||"")||t.includes(e.name||"")||o&&e.puuid===o):o&&(x=x.filter(e=>e.puuid===o))}catch(e){}n(x)});return()=>{o&&o()}},[]);let _=e.length>0,E=(0,a.useMemo)(()=>{let n=["top","jungle","mid","adc","support","bottom"];return e.map(e=>({...e,speaking:(null==b?void 0:b.has(e.puuid||""))||(null==b?void 0:b.has(e.name||""))||!1,normalizedRole:"bottom"===e.role?"adc":e.role})).sort((e,t)=>{let o=n.indexOf(e.normalizedRole||""),a=n.indexOf(t.normalizedRole||"");return -1!==o&&-1!==a?o-a:-1!==o?-1:-1!==a?1:(e.name||"").localeCompare(t.name||"")})},[e,b]);return t?(0,o.jsxs)("div",{ref:f,className:"rounded-2xl select-none transition-all duration-300 ease-in-out inline-flex p-1 ".concat(C.colors.background," ").concat(C.effects.blur),style:{...h,opacity:C.opacity.base,"--hover-opacity":C.opacity.hover,"--hover-scale":C.effects.scale},onMouseEnter:e=>{e.currentTarget.style.opacity=C.opacity.hover.toString(),e.currentTarget.style.transform="scale(".concat(C.effects.scale,")")},onMouseLeave:e=>{e.currentTarget.style.opacity=C.opacity.base.toString(),e.currentTarget.style.transform="scale(1)"},onContextMenu:e=>{let n=Object.values(u).map(e=>({id:"theme-".concat(e.id),label:e.name,onClick:()=>{g(e.id),function(e){try{localStorage.setItem("hexcall-overlay-theme",e)}catch(e){console.warn("Failed to save overlay theme:",e)}}(e.id)}}));j(e,[{id:"hide",label:"Hide Overlay",icon:c.tgn,onClick:()=>r(!1)},{id:"settings",label:"Open Settings",icon:c.mdD,onClick:()=>{window.open("/settings","_blank")}},{separator:!0,id:"sep1",label:"",onClick:()=>{}},{id:"themes",label:"Themes",icon:c.SaA,onClick:()=>{}},...n,{separator:!0,id:"sep2",label:"",onClick:()=>{}},{id:"join",label:"Join Call",icon:c.I7T,onClick:()=>{var e,n;return null===(e=(n=window).__hexcall_join)||void 0===e?void 0:e.call(n)}},{id:"leave",label:"Leave Call",icon:c.tNS,onClick:()=>{var e,n;return null===(e=(n=window).__hexcall_leave)||void 0===e?void 0:e.call(n)},danger:!0}])},children:[(0,o.jsxs)("div",{className:"flex flex-col gap-1 items-center",children:[!_&&(0,o.jsx)("div",{className:"px-1.5 py-1 text-neutral-400 text-[10px]",children:"Overlay ready"}),E.map(e=>{var n;let t=e.normalizedRole||"unknown";return(0,o.jsxs)("div",{className:"group relative flex flex-col items-center",style:m,onContextMenu:n=>{j(n,[{id:"mute",label:"Mute User",icon:c.WjQ,onClick:()=>null==w?void 0:w(e.puuid||e.name||"",0)},{id:"volume-50",label:"Set Volume 50%",onClick:()=>null==w?void 0:w(e.puuid||e.name||"",.5)},{id:"volume-100",label:"Set Volume 100%",onClick:()=>null==w?void 0:w(e.puuid||e.name||"",1)},{separator:!0,id:"sep1",label:"",onClick:()=>{}},{id:"ping",label:"Ping User",icon:c.GPV,onClick:()=>console.log("Ping user:",e.name)}])},children:["unknown"!==t&&(0,o.jsx)("div",{className:"absolute -top-1 -left-1 w-2 h-2 ".concat({top:"bg-blue-400",jungle:"bg-green-400",mid:"bg-yellow-400",adc:"bg-red-400",support:"bg-purple-400"}[t]||"bg-neutral-400"," rounded-full border border-neutral-900 z-10")}),(0,o.jsx)("div",{className:"w-9 h-9 rounded-full bg-neutral-900/40 overflow-hidden flex items-center justify-center ring-1 transition-all cursor-pointer ".concat(e.speaking?"ring-2 ".concat(C.colors.speaking," ").concat(C.effects.shadow," animate-pulse"):"".concat(C.colors.border," group-hover:").concat(C.colors.accent)),children:(0,o.jsx)(l.Q,{championName:e.championName,championId:e.championId,profileIconId:e.profileIconId,alt:e.name||"Player",role:e.role,className:"w-full h-full object-cover"})}),e.speaking&&(0,o.jsx)("div",{className:"absolute -top-0.5 -right-0.5 w-3 h-3 bg-green-400 rounded-full border-2 border-neutral-900 animate-pulse"}),(0,o.jsx)("div",{className:"absolute top-full mt-1 left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",children:(0,o.jsxs)("div",{className:"pointer-events-auto bg-neutral-950/80 backdrop-blur-sm border border-neutral-800/60 rounded-xl p-3 shadow-xl flex flex-col items-center gap-3 min-w-[140px]",children:[(0,o.jsx)("div",{className:"text-xs text-white font-medium text-center truncate max-w-[120px]",children:e.name}),(0,o.jsx)(i.o,{userId:e.puuid||e.name||"",initialVolume:null!==(n=null==y?void 0:y(e.puuid||e.name||""))&&void 0!==n?n:1,onVolumeChange:(e,n)=>null==w?void 0:w(e,n)}),(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsx)("button",{className:"w-7 h-7 rounded-full chip flex items-center justify-center hover:bg-red-500/20","aria-label":"Mute user",onClick:()=>null==w?void 0:w(e.puuid||e.name||"",0),children:(0,o.jsx)(c.WjQ,{className:"w-3 h-3"})}),(0,o.jsx)("button",{className:"w-7 h-7 rounded-full chip flex items-center justify-center hover:bg-yellow-500/20","aria-label":"Ping",children:(0,o.jsx)(c.GPV,{className:"w-3 h-3"})})]}),(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsx)("button",{className:"w-7 h-7 rounded-full chip flex items-center justify-center hover:bg-green-500/20","aria-label":"Join",onClick:()=>{var e,n;return null===(e=(n=window).__hexcall_join)||void 0===e?void 0:e.call(n)},children:(0,o.jsx)(c.I7T,{className:"w-3 h-3"})}),(0,o.jsx)("button",{className:"w-7 h-7 rounded-full chip flex items-center justify-center hover:bg-red-500/20","aria-label":"Leave",onClick:()=>{var e,n;return null===(e=(n=window).__hexcall_leave)||void 0===e?void 0:e.call(n)},children:(0,o.jsx)(c.tNS,{className:"w-3 h-3"})})]})]})})]},e.puuid)})]}),(0,o.jsx)(s,{visible:k.visible,x:k.x,y:k.y,items:k.items,onClose:N})]}):(0,o.jsx)("div",{className:"fixed top-2 right-2 w-8 h-8 bg-neutral-900/50 rounded-full flex items-center justify-center cursor-pointer hover:bg-neutral-800/70 transition-colors",onClick:()=>r(!0),style:m,children:(0,o.jsx)(c.dSq,{className:"w-4 h-4 text-neutral-400"})})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=9915)}),_N_E=e.O()}]);